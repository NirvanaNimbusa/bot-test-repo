on: push
name: Publish stories if changed
jobs:
  checkChangesInStories:
    name: Check changes in stories
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@master
    - run: |
        git config --global user.email "github-actions@users.noreply.github.com"
        git config --global user.name "GitHub Actions"
        git commit --allow-empty -m "Trigger notification"
        git diff --name-only HEAD~$(jq '.commits | length' "${GITHUB_EVENT_PATH}") -- $*
    - name: Check changes in stories
      uses: ./action
      with:
        args: src
